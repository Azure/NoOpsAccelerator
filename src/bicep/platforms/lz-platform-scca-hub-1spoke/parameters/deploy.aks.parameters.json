{
  "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentParameters.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "parRequired": {
      "value": {
        "orgPrefix": "anoa",
        "templateVersion": "v1.0",
        "deployEnvironment": "aks"
      }
    },
    "parTags": {
      "value": {
        "organization": "anoa",
        "templateVersion": "v1.0",
        "deployEnvironment": "aks",
        "deploymentType": "NoOpsBicep"
      }
    },
    "parHubSubscriptionId": {
      "value": "c24647bf-0c86-4408-8d29-6a67262a2701"
    },
    "parHubVirtualNetworkAddressPrefix": {
      "value": "10.0.100.0/24"
    },
    "parHubSubnetAddressPrefix": {
      "value": "10.0.100.128/27"
    },
    "parOperationsSubscriptionId": {
      "value": "c24647bf-0c86-4408-8d29-6a67262a2701"
    },
    "parOperationsVirtualNetworkAddressPrefix": {
      "value": "10.0.115.0/26"
    },
    "parOperationsSubnetAddressPrefix": {
      "value": "10.0.115.0/27"
    },
    "parNetworkArtifacts": {
      "value": {
        "enable": false,
        "artifactsKeyVault": {
          "keyVaultPolicies": {
            "objectId": "7bc6bc45-b256-407c-9d79-bde13dfb5639",
            "permissions": {
              "keys": [
                "get",
                "list",
                "update"
              ],
              "secrets": [
                "all"
              ]
            },
            "tenantId": "80c5c29b-f6c2-457b-af54-603a8d840878"
          }
        }
      }
    },
    "parDdosStandard": {
      "value": {
        "enabled": false
      }
    },
    "parHub": {
      "value": {
        "subscriptionId": "xxxxxxx-xxxx-xxxx-xxxx-xxxxxxx",
        "virtualNetworkAddressPrefix": "10.0.100.0/24",
        "subnetAddressPrefix": "10.0.100.128/27",
        "virtualNetworkDiagnosticsLogs": [],
        "virtualNetworkDiagnosticsMetrics": [],
        "networkSecurityGroupRules": [],
        "networkSecurityGroupDiagnosticsLogs": [
          {
            "category": "NetworkSecurityGroupEvent",
            "enabled": true
          },
          {
            "category": "NetworkSecurityGroupRuleCounter",
            "enabled": true
          }
        ],
        "subnetServiceEndpoints": [
          {
            "service": "Microsoft.Storage"
          }
        ]
      }
    },
    "parOperationsSpoke": {
      "value": {
<<<<<<< HEAD
        "subscriptionId": "xxxxxxx-xxxx-xxxx-xxxx-xxxxxxx",
        "virtualNetworkAddressPrefix": "10.0.115.0/26",
        "subnetAddressPrefix": "10.0.115.0/27",
        "sourceAddressPrefixes": [],
        "virtualNetworkDiagnosticsLogs": [],
        "virtualNetworkDiagnosticsMetrics": [],
        "networkSecurityGroupRules": [
          {
            "name": "Allow-Traffic-From-Spokes",
            "properties": {
              "access": "Allow",
              "description": "Allow traffic from spokes",
              "destinationAddressPrefix": "10.0.115.0/26",
              "destinationPortRanges": [
                "22",
                "80",
                "443",
                "3389"
              ],
              "direction": "Inbound",
              "priority": 200,
              "protocol": "*",
              "sourceAddressPrefixes": [],
              "sourcePortRange": "*"
            },
            "type": "string"
          }
        ],
        "publicIPAddressDiagnosticsLogs": [
          {
            "category": "DDoSProtectionNotifications",
            "enabled": true
          },
          {
            "category": "DDoSMitigationFlowLogs",
            "enabled": true
          },
          {
            "category": "DDoSMitigationReports",
            "enabled": true
          }
        ],
        "networkSecurityGroupDiagnosticsLogs": [
          {
            "category": "NetworkSecurityGroupEvent",
            "enabled": true
          },
          {
            "category": "NetworkSecurityGroupRuleCounter",
            "enabled": true
          }
        ],
        "subnetServiceEndpoints": [
          {
            "service": "Microsoft.Storage"
          }
        ]
=======
        "enableSentinel": true,
        "logAnalyticsWorkspaceCappingDailyQuotaGb": -1,
        "logAnalyticsWorkspaceRetentionInDays": 30,
        "logAnalyticsWorkspaceSkuName": "PerGB2018",
        "logStorageSkuName": "Standard_GRS"
>>>>>>> fb840110bb44381eaca2be4365f1c11307d468c4
      }
    },
    "parAzureFirewall": {
      "value": {
        "enable": true,
        "clientSubnetName": "AzureFirewallSubnet",
        "clientSubnetAddressPrefix": "10.0.100.0/26",
        "clientSubnetServiceEndpoints": [],
        "clientPublicIPAddressAvailabilityZones": [],
        "managementSubnetName": "AzureFirewallManagementSubnet",
        "managementSubnetAddressPrefix": "10.0.100.64/26",
        "managementSubnetServiceEndpoints": [],
        "managementPublicIPAddressAvailabilityZones": [],
        "supernetIPAddress": "10.0.96.0/19",
        "skuTier": "Premium",
        "threatIntelMode": "Alert",
        "intrusionDetectionMode": "Alert",
        "publicIPAddressDiagnosticsLogs": [
          {
            "category": "DDoSProtectionNotifications",
            "enabled": true
          },
          {
            "category": "DDoSMitigationFlowLogs",
            "enabled": true
          },
          {
            "category": "DDoSMitigationReports",
            "enabled": true
          }
        ],
        "publicIPAddressDiagnosticsMetrics": [
          {
            "category": "AllMetrics",
            "enabled": true
          }
        ],
        "diagnosticsLogs": [
          "AzureFirewallApplicationRule",
          "AzureFirewallNetworkRule",
          "AzureFirewallDnsProxy"
        ],
        "diagnosticsMetrics": [
          "AllMetrics"
        ],
        "parApplicationRuleCollections": {
          "value": [
            {
              "name": "AzureAuth",
              "properties": {
                "priority": 110,
                "action": {
                  "type": "Allow"
                },
                "rules": [
                  {
                    "name": "msftauth",
                    "protocols": [
                      {
                        "port": 443,
                        "protocolType": "Https"
                      }
                    ],
                    "targetFqdns": [
                      "aadcdn.msftauth.net",
                      "aadcdn.msauth.net"
                    ],
                    "terminateTLS": false,
                    "sourceAddresses": [
                      "*"
                    ]
                  }
                ]
              }
            }
          ]
        },
        "parNetworkRuleCollections": {
          "value": [
            {
              "name": "AllowAzureCloud",
              "properties": {
                "priority": 100,
                "action": {
                  "type": "Allow"
                },
                "rules": [
                  {
                    "name": "AzureCloud",
                    "ipProtocols": [
                      "Any"
                    ],
                    "sourceAddresses": [
                      "*"
                    ],
                    "sourceIpGroups": [],
                    "destinationAddresses": [
                      "AzureCloud"
                    ],
                    "destinationIpGroups": [],
                    "destinationFqdns": [],
                    "destinationPorts": [
                      "*"
                    ]
                  }
                ]
              }
            },
            {
              "name": "AllowTrafficBetweenSpokes",
              "properties": {
                "priority": 200,
                "action": {
                  "type": "Allow"
                },
                "rules": [
                  {
                    "name": "AllSpokeTraffic",
                    "ipProtocols": [
                      "Any"
                    ],
                    "sourceAddresses": [
                      "10.0.69.1"
                    ],
                    "sourceIpGroups": [],
                    "destinationAddresses": [
                      "*"
                    ],
                    "destinationIpGroups": [],
                    "destinationFqdns": [],
                    "destinationPorts": [
                      "*"
                    ]
                  }
                ]
              }
            }
          ]
        },
        "parStorageAccountAccess": {
          "value": {
            "enableRoleAssignmentForStorageAccount": false,
            "principalIds": [
              "7bc6bc45-b256-407c-9d79-bde13dfb5639"
            ],
            "roleDefinitionIdOrName": "Contributor"
          }
        },
        "parLogging": {
          "value": {
            "enableSentinel": "true",
            "logAnalyticsWorkspaceCappingDailyQuotaGb": -1,
            "logAnalyticsWorkspaceRetentionInDays": 30,
            "logAnalyticsWorkspaceSkuName": "PerGB2018",
            "logStorageSkuName": "Standard_GRS"
          }
        },
        "parRemoteAccess": {
          "value": {
            "enable": true,
            "bastion": {
              "sku": "Standard",
              "subnetAddressPrefix": "172.16.100.160/27",
              "publicIPAddressAvailabilityZones": [],
              "linux": {
                "enable": true,
                "vmAdminUsername": "azureuser",
                "enableVmPasswordAuthentication": true,
                "vmAuthenticationType": "password",
                "vmAdminPasswordOrKey": "Rem0te@2020246",
                "vmSize": "Standard_B2s",
                "vmOsDiskCreateOption": "FromImage",
                "vmOsDiskType": "Standard_LRS",
                "vmImagePublisher": "Canonical",
                "vmImageOffer": "UbuntuServer",
                "vmImageSku": "18.04-LTS",
                "vmImageVersion": "latest",
                "networkInterfacePrivateIPAddressAllocationMethod": "Dynamic"
              },
              "windows": {
                "enable": false,
                "vmAdminUsername": "azureuser",
                "VmAdminPassword": "Rem0te@2020246",
                "vmSize": "Standard_DS1_v2",
                "vmOsDiskCreateOption": "FromImage",
                "VmStorageAccountType": "StandardSSD_LRS",
                "vmImagePublisher": "MicrosoftWindowsServer",
                "vmImageOffer": "WindowsServer",
                "vmImageSku": "2019-datacenter",
                "vmImageVersion": "latest",
                "networkInterfacePrivateIPAddressAllocationMethod": "Dynamic"
              },
              "customScriptExtension": {
                "install": false,
                "script64": "$(cat script.sh | base64)"
              }
            }
          }
        },
        "parSecurityCenter": {
          "value": {
            "enableDefender": true,
            "alertNotifications": "Off",
            "alertsToAdminsNotifications": "Off",
            "emailSecurityContact": "anoa@microsoft.com",
            "phoneSecurityContact": "5555555555"
          }
        }
      }
    }
  }
}